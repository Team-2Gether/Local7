<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.twogether.sra.restaurant.dao.RestaurantDAO">

    <resultMap id="restaurantMap" type="com.twogether.sra.restaurant.vo.RestaurantVO">
        <id property="restaurantId" column="RESTAURANT_ID"/>
        <result property="restaurantName" column="RESTAURANT_NAME"/>
        <result property="restaurantAddress" column="RESTAURANT_ADDRESS"/>
        <result property="restaurantPhoneNumber" column="RESTAURANT_PHONE_NUMBER"/> <result property="restaurantCategory" column="RESTAURANT_CATEGORY"/>     <result property="restaurantLatitude" column="RESTAURANT_LATITUDE"/>
        <result property="restaurantLongitude" column="RESTAURANT_LONGITUDE"/>
        <result property="restaurantOpenHours" column="RESTAURANT_OPEN_HOURS"/>   <result property="restaurantBreakTime" column="RESTAURANT_BREAK_TIME"/>   <result property="restaurantHoliday" column="RESTAURANT_HOLIDAY"/>       <result property="restaurantParkingInfo" column="RESTAURANT_PARKING_INFO"/> <result property="restaurantAverageRating" column="RESTAURANT_AVERAGE_RATING"/> <result property="restaurantReviewCount" column="RESTAURANT_REVIEW_COUNT"/> </resultMap>

    <select id="findAllRestaurants" resultMap="restaurantMap"> SELECT
        RESTAURANT_ID,
        RESTAURANT_NAME,
        RESTAURANT_ADDRESS,
        RESTAURANT_PHONE_NUMBER,
        RESTAURANT_CATEGORY,
        RESTAURANT_LATITUDE,
        RESTAURANT_LONGITUDE,
        RESTAURANT_OPEN_HOURS,
        RESTAURANT_BREAK_TIME,
        RESTAURANT_HOLIDAY,
        RESTAURANT_PARKING_INFO,
        RESTAURANT_AVERAGE_RATING,
        RESTAURANT_REVIEW_COUNT
        FROM
        TB_RESTAURANT
        WHERE
        RESTAURANT_LATITUDE IS NOT NULL AND RESTAURANT_LONGITUDE IS NOT NULL
        -- OPTIONAL: Add filtering for restaurantName if it should never be null
        -- AND RESTAURANT_NAME IS NOT NULL
        ORDER BY
        RESTAURANT_NAME
    </select>

    <select id="findRestaurantsByCategory" resultMap="restaurantMap"> SELECT
        RESTAURANT_ID,
        RESTAURANT_NAME,
        RESTAURANT_ADDRESS,
        RESTAURANT_PHONE_NUMBER,
        RESTAURANT_CATEGORY,
        RESTAURANT_LATITUDE,
        RESTAURANT_LONGITUDE,
        RESTAURANT_OPEN_HOURS,
        RESTAURANT_BREAK_TIME,
        RESTAURANT_HOLIDAY,
        RESTAURANT_PARKING_INFO,
        RESTAURANT_AVERAGE_RATING,
        RESTAURANT_REVIEW_COUNT
        FROM
        TB_RESTAURANT
        WHERE
        RESTAURANT_CATEGORY = #{category}
        AND RESTAURANT_LATITUDE IS NOT NULL AND RESTAURANT_LONGITUDE IS NOT NULL
        -- OPTIONAL: Add filtering for restaurantName if it should never be null
        -- AND RESTAURANT_NAME IS NOT NULL
        ORDER BY
        RESTAURANT_NAME
    </select>

</mapper>
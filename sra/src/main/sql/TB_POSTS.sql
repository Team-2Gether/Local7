CREATE TABLE POSTS (
    POST_ID NUMBER GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) PRIMARY KEY,
    USER_ID NUMBER NOT NULL,
    RESTAURANT_ID NUMBER NOT NULL,
    CONTENT CLOB,
    IMAGE_URLS VARCHAR2(1000),
    LOCATION_TAG VARCHAR2(100),
    HASHTAGS VARCHAR2(500),
    LIKE_COUNT NUMBER DEFAULT 0,
    COMMENT_COUNT NUMBER DEFAULT 0,
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP,
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID) ON DELETE CASCADE,
    FOREIGN KEY (RESTAURANT_ID) REFERENCES RESTAURANTS(RESTAURANT_ID) ON DELETE CASCADE
);

CREATE INDEX IDX_POSTS_USER_ID ON POSTS (USER_ID);
CREATE INDEX IDX_POSTS_RESTAURANT_ID ON POSTS (RESTAURANT_ID);

-- 3. 게시글 테이블 (TB_POSTS) 주석 추가
COMMENT ON TABLE TB_POSTS IS '사용자들이 올리는 맛집 방문 후기 게시글 정보를 저장하는 테이블';
COMMENT ON COLUMN TB_POSTS.POST_ID IS '게시글 고유 ID (기본 키)';
COMMENT ON COLUMN TB_POSTS.USER_ID IS '게시글 작성자 ID (TB_USERS 참조)';
COMMENT ON COLUMN TB_POSTS.RESTAURANT_ID IS '관련 맛집 ID (TB_RESTAURANTS 참조)';
COMMENT ON COLUMN TB_POSTS.CONTENT IS '게시글 내용';
COMMENT ON COLUMN TB_POSTS.IMAGE_URLS IS '게시글에 첨부된 이미지 URL들 (콤마 또는 JSON)';
COMMENT ON COLUMN TB_POSTS.LOCATION_TAG IS '위치 태그 (예: #강릉)';
COMMENT ON COLUMN TB_POSTS.HASHTAGS IS '게시글 해시태그들 (콤마 또는 JSON)';
COMMENT ON COLUMN TB_POSTS.LIKE_COUNT IS '게시글 좋아요 수';
COMMENT ON COLUMN TB_POSTS.COMMENT_COUNT IS '게시글 댓글 수';
COMMENT ON COLUMN TB_POSTS.CREATED_AT IS '게시글 생성일시';
COMMENT ON COLUMN TB_POSTS.UPDATED_AT IS '게시글 수정일시';